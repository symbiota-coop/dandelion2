<% content_for :title, @organisation.name %>

<div class="container">
  <div class="row">
    <div class="col-lg-8 mx-auto">

      <div class="d-hotwire-native-none mt-4">
        <h1><%= @organisation.name %> 🏢</h1>
      </div>

      <div class="card mt-4">
        <div class="card-body">
          <% if @organisation.location.present? %>
            <h5 class="card-title">📍 Location</h5>
            <p class="card-text mb-3"><%= @organisation.location %></p>
          <% end %>

          <% if @organisation.website.present? %>
            <h5 class="card-title">🌐 Website</h5>
            <p class="card-text mb-3">
              <a href="<%= @organisation.website %>" target="_blank" rel="noopener"><%= @organisation.website %></a>
            </p>
          <% end %>

          <% if @organisation.intro_text.present? %>
            <h5 class="card-title">📝 About</h5>
            <div class="card-text mb-3">
              <%= simple_format(@organisation.intro_text) %>
            </div>
          <% end %>

          <% if @organisation.followers_count && @organisation.followers_count > 0 %>
            <h5 class="card-title">👥 Community</h5>
            <p class="card-text mb-3">
              <%= pluralize(@organisation.followers_count, 'follower') %>
            </p>
          <% end %>

          <% if @organisation.telegram_group.present? %>
            <h5 class="card-title">💬 Telegram</h5>
            <p class="card-text mb-3">
              <a href="<%= @organisation.telegram_group %>" target="_blank" rel="noopener">Join our Telegram group</a>
            </p>
          <% end %>

          <% if @organisation.slug.present? %>
            <h5 class="card-title">🔗 URL Slug</h5>
            <p class="card-text mb-3">
              <code><%= @organisation.slug %></code>
            </p>
          <% end %>

          <div class="mt-3">
            <small class="text-muted">
              <i class="bi bi-calendar"></i> Created <%= @organisation.created_at.strftime("%B %d, %Y") %>
            </small>
          </div>
        </div>
      </div>

      <!-- Events Section -->
      <div class="card mt-4">
        <div class="card-body">
          <h5 class="card-title">🎉 Events</h5>
          <% if @events.any? %>
            <div class="row">
              <%= render partial: 'shared/event_card', collection: @events, as: :event %>
            </div>
            <% if @organisation.events.count > 20 %>
              <div class="mt-3">
                <small class="text-muted">
                  Showing latest 20 events. This organisation has <%= pluralize(@organisation.events.count, 'event') %> in total.
                </small>
              </div>
            <% end %>
          <% else %>
            <p class="card-text text-muted">
              <i class="bi bi-calendar-x"></i> No events found for this organisation yet.
            </p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
